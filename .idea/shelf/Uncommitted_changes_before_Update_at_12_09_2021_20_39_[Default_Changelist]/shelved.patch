Index: website/forms.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from flask_wtf import FlaskForm\r\nfrom sqlalchemy.exc import SQLAlchemyError\r\nfrom wtforms import StringField, PasswordField, BooleanField, SelectField, SubmitField, TextAreaField, FloatField, IntegerField\r\nfrom wtforms.validators import InputRequired, Email, Length, EqualTo, ValidationError, NumberRange\r\nfrom wtforms.fields.html5 import DateField\r\nfrom datetime import date\r\nfrom flask_login import current_user\r\nfrom website.models.user import User\r\nfrom website.models.permissions import Permissions\r\nfrom website.models.gender import Gender\r\n\r\n\r\nclass LoginForm(FlaskForm):\r\n    email = StringField('אימייל', validators=[InputRequired(), Email(message='Invalid email'), Length(max=50)])\r\n    password = PasswordField('סיסמה', validators=[InputRequired(), Length(min=8, max=80)])\r\n    remember = BooleanField('תזכור אותי')\r\n    submit = SubmitField('להכנס')\r\n\r\n\r\nclass RegistrationForm(FlaskForm):\r\n    genderList = ''\r\n    permissionsList = ''\r\n    try:\r\n        genderList = Gender.query.all()\r\n        permissionsList = Permissions.query.all()\r\n    except SQLAlchemyError as e:\r\n        error = str(e.__dict__['orig'])\r\n        print(error)\r\n        pass\r\n\r\n    email = StringField('אימייל', validators=[InputRequired(), Email(message='Invalid email'), Length(max=100)])\r\n    firstname = StringField('שם משפחה', validators=[InputRequired(), Length(min=2, max=50)])\r\n    name = StringField('שם פרטי', validators=[InputRequired(), Length(min=2, max=50)])\r\n    gender = SelectField(u'מין', choices=genderList)\r\n    birthdate = DateField('תאריך לידה', default=date.today())\r\n    password = PasswordField('סיסמה', validators=[InputRequired(), Length(min=8, max=50)])\r\n    verification = PasswordField('אימות סיסמה', validators=[InputRequired(), EqualTo('password')])\r\n    permissions = SelectField(u'הרשאות', choices=permissionsList)\r\n    remember = BooleanField('תזכור אותי')\r\n    submit = SubmitField('להרשם')\r\n\r\n    def validate_email(self, email):\r\n        user = User.query.filter_by(email=email.data).first()\r\n        if user:\r\n            raise ValidationError('הרשמה נכשלה: משתמש קיים')\r\n\r\n\r\nclass UpdateAccountForm(FlaskForm):\r\n    genderList = ''\r\n    permissionsList = ''\r\n    try:\r\n        genderList = Gender.query.all()\r\n        permissionsList = Permissions.query.all()\r\n    except SQLAlchemyError as e:\r\n        error = str(e.__dict__['orig'])\r\n        print(error)\r\n        pass\r\n\r\n    email = StringField('אימייל', validators=[InputRequired(), Email(message='Invalid email'), Length(max=100)])\r\n    firstname = StringField('שם משפחה', validators=[InputRequired(), Length(min=2, max=50)])\r\n    name = StringField('שם פרטי', validators=[InputRequired(), Length(min=2, max=50)])\r\n    gender = SelectField(u'מין', choices=genderList)\r\n    birthdate = DateField('תאריך לידה', default=date.today())\r\n    permissions = SelectField(u'הרשאות', choices=permissionsList)\r\n    submit = SubmitField('עדכון')\r\n\r\n    def validate_email(self, email):\r\n        if email.data != current_user.email:\r\n            user = User.query.filter_by(email=email.data).first()\r\n            if user:\r\n                raise ValidationError('שמירה נכשלה: משתמש קיים')\r\n\r\n\r\nclass BasicForm(FlaskForm):\r\n    title = StringField('כותרת', validators=[InputRequired(), Length(min=2, max=150)])\r\n    content = TextAreaField('תוכן', validators=[InputRequired(), Length(min=5, max=150000)])\r\n    submit = SubmitField('שמירה')\r\n\r\n\r\nclass ResearchForm(FlaskForm):\r\n    title = StringField('כותרת', validators=[InputRequired(), Length(min=2, max=500)])\r\n    content = TextAreaField('תוכן', validators=[InputRequired(), Length(min=5, max=250000)])\r\n    save = SubmitField('שמירה')\r\n    publish = SubmitField('פירסום')\r\n\r\n\r\nclass QuestionForm(FlaskForm):\r\n    questionsTypesList = ['אמריקאית', 'פתוחה']\r\n    question = StringField('שאלה', validators=[InputRequired(), Length(min=2, max=250)])\r\n    weight = FloatField('משקל %', validators=[InputRequired(), Length(min=2, max=150)])\r\n    type = SelectField(u'סוג שאלה', choices=questionsTypesList)\r\n    place = IntegerField('rating', validators=[InputRequired(), NumberRange(min=0, max=500)])\r\n\r\n\r\nclass AnswerForm(FlaskForm):\r\n    answer = TextAreaField('תשובה', validators=[InputRequired(), Length(min=2, max=250)])\r\n    weight = FloatField('נכונות %', validators=[InputRequired(), Length(min=2, max=150)])\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/website/forms.py b/website/forms.py
--- a/website/forms.py	(revision 70fb215d9d06d964e028b5c5d2cab54ef9294e71)
+++ b/website/forms.py	(date 1631467980509)
@@ -79,9 +79,10 @@
 
 class ResearchForm(FlaskForm):
     title = StringField('כותרת', validators=[InputRequired(), Length(min=2, max=500)])
-    content = TextAreaField('תוכן', validators=[InputRequired(), Length(min=5, max=250000)])
+    content = TextAreaField('תוכן')
+    new_questioner = SubmitField('הוספת שאלון')
     save = SubmitField('שמירה')
-    publish = SubmitField('פירסום')
+    publish = SubmitField('פרסום')
 
 
 class QuestionForm(FlaskForm):
Index: website/routes/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from flask import Blueprint, render_template, flash, redirect, url_for, request\r\nfrom flask_login import login_required, current_user\r\nfrom jinja2 import Environment, FileSystemLoader\r\nfrom website.forms import UpdateAccountForm, QuestionForm, AnswerForm, ResearchForm, BasicForm\r\nfrom website.models.gender import Gender\r\nfrom website.models.role import Role\r\nfrom website.models.permissions import Permissions\r\nfrom website.models.research_participants import Participants\r\nfrom website.models.question import Question\r\nfrom website.models.questioner import Questioner\r\nfrom website.models.answer import Answer\r\nfrom website.models.research import Research\r\nfrom website.models.user import User\r\nfrom ..extensions import db\r\n\r\nviews = Blueprint('views', __name__)\r\n\r\n\r\n@views.route('/')\r\ndef home():\r\n    return render_template('index.html')\r\n\r\n\r\n@views.route('/builder')\r\ndef builder():\r\n    research_form = ResearchForm()\r\n    questioner_form = BasicForm()\r\n    question_form = QuestionForm()\r\n    answer_form = AnswerForm()\r\n    questioners = []\r\n    questions = []\r\n    answers = []\r\n    if question_form.validate_on_submit():\r\n        q = Question(question=question_form.question.data, weight=question_form.weight.data, type=question_form.type.data, place=question_form.place.data, author_id=current_user.id)\r\n        questions.append(q)\r\n        db.session.add(q)\r\n        # add question.id to all answers where no question.id\r\n        # every question submit must be after answers for this question submitted\r\n        for answer in answers:\r\n            if answer.question_id == '':\r\n                q.optional_answers.append(answer)\r\n                db.session.add(answer)\r\n                answers.remove(answer)\r\n    elif answer_form.validate_on_submit():\r\n        a = Answer(answer=answer_form.answer.data, type=answer_form.type.data, weight=answer_form.weight.data)\r\n        answers.append(a)\r\n    elif research_form.validate_on_submit():\r\n        # add questions to questioner\r\n        questioner = Questioner(title=questioner_form.title.data, content=questioner_form.content.data)\r\n        for q in questions:\r\n            questioner.question.append(q)\r\n            questioner.remove(q)\r\n        questioners.append(questioner)\r\n        db.session.add(questioner)\r\n    elif research_form.validate_on_submit():\r\n        # TODO: get participants as well\r\n        r = Research(title=research_form.title.data, content=research_form.content.data)\r\n        # add questioners to research\r\n        for q in questioners:\r\n            r.questioner.append(q)\r\n            questioners.remove(q)\r\n        if research_form.publish.validate(research_form):\r\n            if str(current_user.permission) != 'חוקר':\r\n                r.waiting_to_approval = True\r\n            elif current_user.permission_confirmation and str(current_user.permission) == 'חוקר':\r\n                r.approved = True\r\n        db.session.add(r)\r\n        # add user as participant in research\r\n        p = Participants(research_id=r.id, participant_id=current_user.id)\r\n        db.session.add(p)\r\n        # add user as research creator\r\n        role = Role.query.filter_by(role='מחבר').first()\r\n        role.participant.append(p)\r\n        db.session.add(role)\r\n        db.session.commit()\r\n    return render_template(\"template_builder.html\", questioner_form=questioner_form, question_form=question_form, answer_form=answer_form)\r\n\r\n\r\n@views.route('/contact', methods=['GET', 'POST'])\r\ndef contact():\r\n    return render_template(\"contact_us.html\")\r\n\r\n\r\n@views.route('/about')\r\ndef about():\r\n    return render_template(\"about.html\")\r\n\r\n\r\n@views.route('/dashboard', methods=['GET', 'POST'])\r\n@login_required\r\ndef dashboard():\r\n    # TODO: set dashboard functions: approval from admin & researcher\r\n    # if user has no permission_confirmation -> it`s regular user\r\n    table_name = 'מחקרים'\r\n    table = Participants.query.filter_by(participant_id=current_user.id).all()\r\n    # TODO: add table_headers for each table view\r\n    table_headers = []\r\n    # else change data-view by permissions\r\n    if current_user.permission_confirmation and not str(current_user.permission) == \"נחקר\":\r\n        if str(current_user.permission) == \"מנהל\":\r\n            table_name = 'משתמשים לאישור הרשאות'\r\n            table_headers = ['שם', 'שם משפחה', 'אימייל', 'תאריך הרשמה', 'הרשאות']\r\n            table = User.query.filter_by(permission_confirmation=False).all()\r\n        elif str(current_user.permission) == 'עוזר מחקר':\r\n            table = Participants.query.filter_by(participant_id=current_user.id).all()\r\n        elif str(current_user.permission) == 'חוקר':\r\n            table_name = 'מחקרים לאישור פרסום'\r\n            table = Participants.query.filter_by(participant_id=current_user.id, waiting_to_approval=True).all()\r\n        else:\r\n            flash('הרשאות לא הוגדרו', 'error')\r\n\r\n    env = Environment(loader=FileSystemLoader('/path/to/templates'))\r\n\r\n    # TODO: put this functions to other file\r\n    def query_db(tag, query, table_name):\r\n        #TODO: delete user properly\r\n        return 'todo'\r\n\r\n    def delete_user(email):\r\n        #TODO: delete user properly\r\n        return 'todo'\r\n\r\n    def validate_user(email):\r\n        u = User.query.filter_by(email=email).first()\r\n        u.permission_confirmation = True\r\n        db.session.commit\r\n        return 'todo: check'\r\n\r\n    def change_permissions(email, permission):\r\n        u = User.query.filter_by(email=email).first()\r\n        u.permission = permission\r\n        if str(current_user.permission) == \"מנהל\" or permission == \"נחקר\":\r\n            u.permission_confirmation = True\r\n        db.session.commit\r\n        return 'todo'\r\n\r\n    def validate_research(id):\r\n        # TODO: if Participants.query.filter_by():\r\n        r = Research.query.filter_by(id=id).first()\r\n        r.approved = True\r\n        r.waiting_to_approval = False\r\n        db.session.commit\r\n        return 'todo'\r\n\r\n    def delete_research(id):\r\n        return 'todo'\r\n\r\n    def delete_participant(email, id):\r\n        u = User.query.filter_by(email=email).first()\r\n        p = Participants.delete().where(Participants.c.participant_id == u.id, Participants.c.research_id == id)\r\n        p.execute()\r\n        return 'todo: check'\r\n\r\n    def add_participant(email, id):\r\n        u = User.query.filter_by(email=email).first()\r\n        p = Participants(research_id=id, participant_id=u.id)\r\n        db.session.add(p)\r\n        db.session.commit\r\n        return 'todo: check'\r\n\r\n    # TODO put to init file\r\n    env.globals['delete_participant'] = delete_participant\r\n    env.globals['add_participant'] = add_participant\r\n    env.globals['change_permissions'] = change_permissions\r\n    env.globals['validate_research'] = validate_research\r\n    env.globals['validate_user'] = validate_user\r\n    env.globals['delete_user'] = delete_user\r\n    env.globals['delete_research'] = delete_research\r\n\r\n    return render_template(\"dashboard.html\", table_headers=table_headers, table=table, table_name=table_name)\r\n\r\n\r\n@views.route('/profile', methods=['GET', 'POST'])\r\n@login_required\r\ndef profile():\r\n    # TODO: add delete option\r\n    if current_user.is_authenticated:\r\n        form = UpdateAccountForm()\r\n        if form.validate_on_submit():\r\n            current_user.first_name = form.firstname.data\r\n            current_user.second_name = form.name.data\r\n            current_user.email = form.email.data\r\n            current_user.birth_date = form.birthdate.data\r\n            g = db.session.query(Gender).filter_by(gender=form.gender.data).first()\r\n            g.users.append(current_user)\r\n            if current_user.permission != form.permissions.data:\r\n                if form.permissions.data == \"נחקר\":\r\n                    current_user.permission_confirmation = True\r\n                else:\r\n                    current_user.permission_confirmation = False\r\n                p = Permissions.query.filter_by(permission=form.permissions.data).first()\r\n                p.users.append(current_user)\r\n            db.session.commit()\r\n            flash('שינויים נשמרו בהצלחה', 'success')\r\n        elif request.method == 'GET':\r\n            form.firstname.data = current_user.first_name\r\n            form.name.data = current_user.second_name\r\n            form.email.data = current_user.email\r\n            form.birthdate.data = current_user.birth_date\r\n            form.gender.data = current_user.gender\r\n            form.permissions.data = current_user.permission\r\n        return render_template(\"profile.html\", user=current_user, form=form)\r\n    else:\r\n        flash('משתמש לא מחובר', 'error')\r\n        return redirect(url_for('auth.login'))\r\n\r\n'''\r\ndef delete_user():\r\n    if \"user\" in session:\r\n        User.query.filter_by(id=session[\"user\"].id).delete()\r\n        flash ('משתמש נמחק בהצלחה', 'success')\r\n        return redirect(url_for(\"view/home\"))\r\n'''\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/website/routes/views.py b/website/routes/views.py
--- a/website/routes/views.py	(revision 70fb215d9d06d964e028b5c5d2cab54ef9294e71)
+++ b/website/routes/views.py	(date 1631467687942)
@@ -204,10 +204,27 @@
         flash('משתמש לא מחובר', 'error')
         return redirect(url_for('auth.login'))
 
-'''
-def delete_user():
-    if "user" in session:
-        User.query.filter_by(id=session["user"].id).delete()
-        flash ('משתמש נמחק בהצלחה', 'success')
-        return redirect(url_for("view/home"))
-'''
+
+@views.route('/research', methods=['GET', 'POST'])
+@login_required
+def research():
+    form = ResearchForm()
+    if form.validate_on_submit():
+        r = Research(title=form.title.data, content=form.content.data)
+        if form.publish.validate(form):
+            if str(current_user.permission) != 'חוקר':
+                r.waiting_to_approval = True
+            elif current_user.permission_confirmation and str(current_user.permission) == 'חוקר':
+                r.approved = True
+        db.session.add(r)
+        db.session.commit()
+        role = Role.query.filter_by(role='מחבר').first()
+        p = Participants(research_id=r.id, participant_id=current_user.id, role_id=role.id)
+        db.session.add(p)
+        db.session.commit()
+        role.participant.append(p)
+        db.session.add(role)
+        db.session.commit()
+        if form.new_questioner.validate(form):
+            return redirect(url_for("views.builder"))
+    return render_template("new_research.html", form=form)
Index: website/__init__.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from flask import Flask\r\n\r\nfrom .commands import *\r\nimport config\r\nfrom .extensions import db, bcrypt, bootstrap, login_manager, csrf, session\r\nfrom website.models import questioner, question, answer, research, gender, user, article, message, permissions\r\nfrom website.models import research_participants, role, response\r\n\r\n\r\ndef create_app(config_name):\r\n    ## create & configure the app\r\n    app = Flask(__name__)\r\n    app.app_context().push()\r\n\r\n    if config_name is None:\r\n        app.config.from_object(config.BaseConfig)\r\n    else:\r\n        app.config.from_object(config_name)\r\n\r\n    db.init_app(app)\r\n    session.init_app(app)\r\n    bcrypt.init_app(app)\r\n    csrf.init_app(app)\r\n    bootstrap.init_app(app)\r\n    login_manager.init_app(app)\r\n\r\n    # commands initialization\r\n    app.cli.add_command(create_tables)\r\n    app.cli.add_command(drop_db)\r\n    app.cli.add_command(reset_db)\r\n    app.cli.add_command(add_default_gender)\r\n    app.cli.add_command(add_default_permissions)\r\n    app.cli.add_command(add_default_admin)\r\n    app.cli.add_command(add_default_role)\r\n\r\n    # importing blueprints\r\n    from website.routes.views import views\r\n    from website.routes.auth import auth\r\n\r\n    # register blueprints\r\n    app.register_blueprint(views, url_prefix='/')\r\n    app.register_blueprint(auth, url_prefix='/')\r\n\r\n    # login Manager configurations\r\n    login_manager.login_view = 'auth.login'\r\n    login_manager.login_message = u\"תכנסו בבקשה\"\r\n    login_manager.login_message_category = 'info'\r\n    return app\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/website/__init__.py b/website/__init__.py
--- a/website/__init__.py	(revision 70fb215d9d06d964e028b5c5d2cab54ef9294e71)
+++ b/website/__init__.py	(date 1631467962330)
@@ -8,7 +8,7 @@
 
 
 def create_app(config_name):
-    ## create & configure the app
+    # create & configure the app
     app = Flask(__name__)
     app.app_context().push()
 
@@ -21,6 +21,7 @@
     session.init_app(app)
     bcrypt.init_app(app)
     csrf.init_app(app)
+
     bootstrap.init_app(app)
     login_manager.init_app(app)
 
Index: website/models/research_participants.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from ..extensions import db\r\nfrom sqlalchemy.orm import backref\r\n\r\n\r\nclass Participants(db.Model):\r\n    id = db.Column(\"id\", db.Integer, primary_key=True)\r\n    research_id = db.Column('research_id', db.Integer, db.ForeignKey('research.id'), primary_key=True)\r\n    participant_id = db.Column('participant_id', db.Integer, db.ForeignKey('user.id'), primary_key=True)\r\n\r\n    role_id = db.Column(db.Integer, db.ForeignKey('role.id'))\r\n    responded = db.Column(db.Boolean(), default=False)\r\n    invited = db.Column(db.Boolean(), default=False)\r\n\r\n    participants = db.relationship(\"User\", backref=backref(\"participants\", cascade=\"all, delete-orphan\"))\r\n    research = db.relationship(\"Research\", backref=backref(\"participants\", cascade=\"all, delete-orphan\"))\r\n\r\n    def __repr__(self):\r\n        return '{self.research_id}', '{self.participant_id}', '{self.role}', '{self.invited}', '{self.responded}'\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/website/models/research_participants.py b/website/models/research_participants.py
--- a/website/models/research_participants.py	(revision 70fb215d9d06d964e028b5c5d2cab54ef9294e71)
+++ b/website/models/research_participants.py	(date 1631467687935)
@@ -3,7 +3,6 @@
 
 
 class Participants(db.Model):
-    id = db.Column("id", db.Integer, primary_key=True)
     research_id = db.Column('research_id', db.Integer, db.ForeignKey('research.id'), primary_key=True)
     participant_id = db.Column('participant_id', db.Integer, db.ForeignKey('user.id'), primary_key=True)
 
Index: website/templates/new_research.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/website/templates/new_research.html b/website/templates/new_research.html
--- a/website/templates/new_research.html	(revision 70fb215d9d06d964e028b5c5d2cab54ef9294e71)
+++ b/website/templates/new_research.html	(date 1631464658189)
@@ -1,0 +1,15 @@
+{% extends "base.html" %} {% import "bootstrap/wtf.html" as wtf %}
+{% block main_content %}
+    <form class="form-research" method="POST" action="">
+        {{ form.csrf_token }}
+        <div class="form-group">
+            {{ wtf.form_field(form.title, class_="form-control", id="editor") }}
+        </div>
+        <div class="form-group">
+            {{ wtf.form_field(form.content, class_="form-control", id="editor") }}
+        </div>
+        {{ wtf.form_field(form.new_questioner) }}
+        {{ wtf.form_field(form.save) }}
+        {{ wtf.form_field(form.publish) }}
+    </form>
+{% endblock %}
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"4d7ae0b1-090c-4702-9921-a957c565cb90\" name=\"Default Changelist\" comment=\"added ckeditor as text editor. Row click in table opens modal with more row data\">\r\n      <change afterPath=\"$PROJECT_DIR$/website/templates/article.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/flask_session/847a01ec7ab74629a9d65b4b36ea7adf\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/flask_session/847a01ec7ab74629a9d65b4b36ea7adf\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/website/models/user.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/website/models/user.py\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/website/routes/views.py\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/website/routes/views.py\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/website/static/css/base.css\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/website/static/css/base.css\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/website/static/js/jscript.js\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/website/static/js/jscript.js\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/website/templates/dashboard.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/website/templates/dashboard.html\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/website/templates/template_builder.html\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/website/templates/template_builder.html\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Python Script\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1wGRgegrgoMvkY36DHH5x8LQKT4\" />\r\n  <component name=\"ProjectLevelVcsManager\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"ASKED_ADD_EXTERNAL_FILES\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"last_opened_file_path\" value=\"D:/2020-2021/למידה עמוקה לשפות ודיבור/SCD-Itzhak\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"com.jetbrains.python.configuration.PyActiveSdkModuleConfigurable\" />\r\n  </component>\r\n  <component name=\"PyConsoleOptionsProvider\">\r\n    <option name=\"myPythonConsoleState\">\r\n      <console-settings is-module-sdk=\"true\">\r\n        <option name=\"myUseModuleSdk\" value=\"true\" />\r\n      </console-settings>\r\n    </option>\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\Olga\\Desktop\\2020-2021\\MHA\\website\\templates\" />\r\n      <recent name=\"C:\\Users\\Olga\\Desktop\\2020-2021\\MHA\\website\\static\" />\r\n      <recent name=\"C:\\Users\\Olga\\Desktop\\2020-2021\\MHA\\website\\static\\css\" />\r\n      <recent name=\"C:\\Users\\Olga\\Desktop\\2020-2021\\MHA\\website\\routes\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Python.main\">\r\n    <configuration name=\"commands\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"MHA\" />\r\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\r\n      <option name=\"PARENT_ENVS\" value=\"true\" />\r\n      <envs>\r\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\r\n      </envs>\r\n      <option name=\"SDK_HOME\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/website\" />\r\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\r\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\r\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\r\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/website/commands.py\" />\r\n      <option name=\"PARAMETERS\" value=\"\" />\r\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\r\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\r\n      <option name=\"MODULE_MODE\" value=\"false\" />\r\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\r\n      <option name=\"INPUT_FILE\" value=\"\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <configuration name=\"main\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"MHA\" />\r\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\r\n      <option name=\"PARENT_ENVS\" value=\"true\" />\r\n      <option name=\"SDK_HOME\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$\" />\r\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\r\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\r\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\r\n      <option name=\"SCRIPT_NAME\" value=\"$PROJECT_DIR$/main.py\" />\r\n      <option name=\"PARAMETERS\" value=\"\" />\r\n      <option name=\"SHOW_COMMAND_LINE\" value=\"true\" />\r\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\r\n      <option name=\"MODULE_MODE\" value=\"false\" />\r\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\r\n      <option name=\"INPUT_FILE\" value=\"\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"Python.main\" />\r\n        <item itemvalue=\"Python.commands\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"4d7ae0b1-090c-4702-9921-a957c565cb90\" name=\"Default Changelist\" comment=\"\" />\r\n      <created>1628083052285</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1628083052285</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"Sql working ok &amp; setting default admin, permissions &amp; gender options. Skeleton changes. problem with session_cookie so auth pages not working.\">\r\n      <created>1629201510570</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1629201510570</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"Sql working ok &amp; setting default admin, permissions &amp; gender options. Skeleton changes. problem with session_cookie so auth pages not working.\">\r\n      <created>1629201594519</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1629201594519</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"Sql working ok &amp; setting default admin, permissions &amp; gender options. Skeleton changes. problem with session_cookie so auth pages not working.\">\r\n      <created>1629201604307</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1629201604307</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"working signIn/login/logout/sqlAlchemy\">\r\n      <created>1629297960794</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1629297960794</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"toolbar in template_builder.html\">\r\n      <created>1629788785715</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1629788785715</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"toolbar in template_builder.html working frontend (no drag func for now)\">\r\n      <created>1629964376953</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1629964376953</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"profile.html changes. now user can change personal info\">\r\n      <created>1630309943663</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1630309943664</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"created more tables for future work.\">\r\n      <created>1630422552099</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1630422552099</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"tables ok. from last pull cant find bootstrap/base.html. on it\">\r\n      <created>1631017460085</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1631017460085</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"bootstrap working. added bootstrap dir with wtf &amp; base htmls code. Changed user`s permissions &amp; gender saving/changing code so it will save id`s &amp; not strings\">\r\n      <created>1631107158769</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1631107158769</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"corrected dashboard permissions settings &amp; string error in permissions default data\">\r\n      <created>1631112513269</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1631112513269</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"corrected dashboard permissions settings &#10;TODO: check with researches\">\r\n      <created>1631113926895</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1631113926895</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00013\" summary=\"role default creation by command. research/questions/answers saving to db after creation. &#10;TODO: check if ok (no frontend for it yet)\">\r\n      <created>1631187053673</created>\r\n      <option name=\"number\" value=\"00013\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00013\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1631187053673</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00014\" summary=\"role default creation by command. research/questions/answers saving to db after creation. &#10;TODO: check if ok (no frontend for it yet)\">\r\n      <created>1631278998364</created>\r\n      <option name=\"number\" value=\"00014\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00014\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1631278998364</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00015\" summary=\"modal function on table row click\">\r\n      <created>1631294578245</created>\r\n      <option name=\"number\" value=\"00015\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00015\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1631294578246</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00016\" summary=\"added ckeditor as text editor. Row click in table opens modal with more row data\">\r\n      <created>1631441762788</created>\r\n      <option name=\"number\" value=\"00016\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00016\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1631441762788</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"17\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <option name=\"ADD_EXTERNAL_FILES_SILENTLY\" value=\"true\" />\r\n    <MESSAGE value=\"Sql working ok &amp; setting default admin, permissions &amp; gender options. Skeleton changes. problem with session_cookie so auth pages not working.\" />\r\n    <MESSAGE value=\"working signIn/login/logout/sqlAlchemy\" />\r\n    <MESSAGE value=\"toolbar in template_builder.html\" />\r\n    <MESSAGE value=\"toolbar in template_builder.html working frontend (no drag func for now)\" />\r\n    <MESSAGE value=\"profile.html changes. now user can change personal info\" />\r\n    <MESSAGE value=\"created more tables for future work.\" />\r\n    <MESSAGE value=\"tables ok. from last pull cant find bootstrap/base.html. on it\" />\r\n    <MESSAGE value=\"bootstrap working. added bootstrap dir with wtf &amp; base htmls code. Changed user`s permissions &amp; gender saving/changing code so it will save id`s &amp; not strings\" />\r\n    <MESSAGE value=\"corrected dashboard permissions settings &amp; string error in permissions default data\" />\r\n    <MESSAGE value=\"corrected dashboard permissions settings &#10;TODO: check with researches\" />\r\n    <MESSAGE value=\"role default creation by command. research/questions/answers saving to db after creation. &#10;TODO: check if ok (no frontend for it yet)\" />\r\n    <MESSAGE value=\"modal function on table row click\" />\r\n    <MESSAGE value=\"added ckeditor as text editor. Row click in table opens modal with more row data\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"added ckeditor as text editor. Row click in table opens modal with more row data\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 70fb215d9d06d964e028b5c5d2cab54ef9294e71)
+++ b/.idea/workspace.xml	(date 1631467937465)
@@ -2,15 +2,17 @@
 <project version="4">
   <component name="ChangeListManager">
     <list default="true" id="4d7ae0b1-090c-4702-9921-a957c565cb90" name="Default Changelist" comment="added ckeditor as text editor. Row click in table opens modal with more row data">
-      <change afterPath="$PROJECT_DIR$/website/templates/article.html" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/website/templates/includes/_formhelpers.html" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/flask_session/847a01ec7ab74629a9d65b4b36ea7adf" beforeDir="false" afterPath="$PROJECT_DIR$/flask_session/847a01ec7ab74629a9d65b4b36ea7adf" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/website/models/user.py" beforeDir="false" afterPath="$PROJECT_DIR$/website/models/user.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/website/__init__.py" beforeDir="false" afterPath="$PROJECT_DIR$/website/__init__.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/website/dbDev.sqlite3" beforeDir="false" afterPath="$PROJECT_DIR$/website/dbDev.sqlite3" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/website/forms.py" beforeDir="false" afterPath="$PROJECT_DIR$/website/forms.py" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/website/models/research_participants.py" beforeDir="false" afterPath="$PROJECT_DIR$/website/models/research_participants.py" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/website/routes/views.py" beforeDir="false" afterPath="$PROJECT_DIR$/website/routes/views.py" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/website/static/css/base.css" beforeDir="false" afterPath="$PROJECT_DIR$/website/static/css/base.css" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/website/static/js/jscript.js" beforeDir="false" afterPath="$PROJECT_DIR$/website/static/js/jscript.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/website/templates/base.html" beforeDir="false" afterPath="$PROJECT_DIR$/website/templates/base.html" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/website/templates/dashboard.html" beforeDir="false" afterPath="$PROJECT_DIR$/website/templates/dashboard.html" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/website/templates/template_builder.html" beforeDir="false" afterPath="$PROJECT_DIR$/website/templates/template_builder.html" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/website/templates/new_research.html" beforeDir="false" afterPath="$PROJECT_DIR$/website/templates/new_research.html" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -26,6 +28,14 @@
   </component>
   <component name="Git.Settings">
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
+  </component>
+  <component name="GitSEFilterConfiguration">
+    <file-type-list>
+      <filtered-out-file-type name="LOCAL_BRANCH" />
+      <filtered-out-file-type name="REMOTE_BRANCH" />
+      <filtered-out-file-type name="TAG" />
+      <filtered-out-file-type name="COMMIT_BY_MESSAGE" />
+    </file-type-list>
   </component>
   <component name="ProjectId" id="1wGRgegrgoMvkY36DHH5x8LQKT4" />
   <component name="ProjectLevelVcsManager">
@@ -225,7 +235,14 @@
       <option name="project" value="LOCAL" />
       <updated>1631441762788</updated>
     </task>
-    <option name="localTasksCounter" value="17" />
+    <task id="LOCAL-00017" summary="added ckeditor as text editor. Row click in table opens modal with more row data">
+      <created>1631449831077</created>
+      <option name="number" value="00017" />
+      <option name="presentableId" value="LOCAL-00017" />
+      <option name="project" value="LOCAL" />
+      <updated>1631449831077</updated>
+    </task>
+    <option name="localTasksCounter" value="18" />
     <servers />
   </component>
   <component name="Vcs.Log.Tabs.Properties">
Index: website/templates/base.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% extends \"bootstrap/base.html\" %} {% block title %} {{title}} {% endblock %} {% block styles %} {{super()}}\r\n<link rel=\"stylesheet\" href=\"{{url_for('static', filename='css/base.css')}}\">\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\r\n\r\n<script type=\"text/javascript\" src=\"{{url_for('static', filename='js/jscript.js')}}\"></script>\r\n\r\n<!-- this script is for text editor from https://ckeditor.com/docs/ckeditor5/latest/builds/guides/quick-start.html -->\r\n<script src=\"https://cdn.ckeditor.com/ckeditor5/29.2.0/classic/ckeditor.js\"></script>\r\n<script type=\"text/javascript\"> CKEDITOR.replace('editor')</script>\r\n\r\n{% endblock %} {% block navbar %}\r\n<!-- <link rel=\"stylesheet\" href=\"//cdn.rawgit.com/morteza/bootstrap-rtl/v3.3.4/dist/css/bootstrap-rtl.min.css\"> -->\r\n<!-- <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-rtl/3.4.0/css/bootstrap-rtl.css\" rel=\"stylesheet\" type=\"text/css\" /> -->\r\n\r\n\r\n<nav class=\"navbar navbar-inverse\">\r\n\r\n    <div class=\"container  col-sm-12\">\r\n        <div class=\"navbar-header navbar-right\">\r\n            <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">\r\n            <span class=\"sr-only\">Toggle navigation</span>\r\n            <span class=\"icon-bar\"></span>\r\n            <span class=\"icon-bar\"></span>\r\n            <span class=\"icon-bar\"></span>\r\n          </button>\r\n            <div class=\"container-search\">\r\n                {% block search %}{% endblock %}\r\n            </div>\r\n            <a class=\"navbar-brand\" href=\"./\">My Health Aid     <img src=\"../static/img/logo-mha.png\"   class=\"logo img-responsive\" alt=\"logo\"> </a>\r\n        </div>\r\n\r\n        <div id=\"navbar\" class=\"navbar-collapse collapse\">\r\n            <ul class=\"nav navbar-nav navbar-left\">\r\n\r\n                {% block collapsing_navbar %} {% if current_user.is_authenticated %}\r\n                <li><a href=\"{{ url_for('auth.logout') }}\">להתנתק</a></li>\r\n                {% else %}\r\n                <li><a href=\"{{ url_for('auth.login') }}\">כניסה</a></li>\r\n                <li><a href=\"{{ url_for('auth.signup') }}\">הרשמה</a></li>\r\n                {% endif %} {% endblock %}\r\n            </ul>\r\n        </div>\r\n\r\n    </div>\r\n</nav>\r\n\r\n<div class=\"container\">\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-9\">\r\n            <!--  block for flashed messages -->\r\n            {% block flashed_messages %} {% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for category, message in messages %}\r\n            <!--  if error: color = red -->\r\n            {% if category == 'error' %}\r\n            <div class=\"alert alert-danger alert-dismissable\" role=\"alert\">\r\n                {{ message }}\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"alert\">\r\n                              <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n            </div>\r\n            <!--  if error: color = blue -->\r\n            {% elif category == 'info' %}\r\n            <div class=\"alert alert-info alert-dismissable\" role=\"alert\">\r\n                {{ message }}\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"alert\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n            </div>\r\n            {% else %}\r\n            <!--  if !error->color = green -->\r\n            <div class=\"alert alert-success alert-dismissable\" role=\"alert\">\r\n                {{ message }}\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"alert\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            {% endif %} {% endfor %} {% endif %} {% endwith %} {% endblock %}\r\n            <div class=\"main\">\r\n                {% block main_content %}\r\n\r\n\r\n                <h1>\r\n\r\n                    מערכת תומכת המסייעת בקבלת החלטות </h1>\r\n                <img src=\"../static/mha2.png\" class=\"img_top img-responsive\" alt=\"\">\r\n                <p> תודה על הצטרפות למחקר\r\n                    <br> על מנת לראות את השאלון שלך יש להירשם / להיכנס למערכת\r\n                    <br> אנו מקווים שתפיקו את המירב במערכת\r\n                </p>\r\n\r\n\r\n                <img src=\"../static/1.jpeg\" class=\"img_main img-responsive\" alt=\"\"> {% endblock %}\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"sidenav col-sm-3 navbar-right\">\r\n            {% block sidebar_add_content %}{% endblock %} {% block sidebar_content %}\r\n            <a href=\"{{ url_for('views.dashboard') }}\">דף הבית</a>\r\n            <a href=\"{{ url_for('views.about') }}\">MHA אודות</a>\r\n            <a href=\"https://www.ariel.ac.il/wp/\" target=\"_blank\">אונברסיטת אריאל</a>\r\n            <a href=\"{{ url_for('views.contact') }}\">צור קשר</a> {% endblock %}\r\n        </div>\r\n\r\n\r\n    </div>\r\n</div>\r\n\r\n<style>\r\n    .main .img_main {\r\n        width: 75%;\r\n    }\r\n\r\n    .main .img_top {\r\n        width: 20%;\r\n        float: left;\r\n    }\r\n\r\n    .main p {\r\n        font-size: 15px;\r\n        line-height: 1.5;\r\n        margin-bottom: 30px;\r\n    }\r\n\r\n    .navbar-brand {\r\n        float: none;\r\n    }\r\n\r\n    .navbar .navbar-brand .logo {\r\n        display: inline-block !important;\r\n        margin-left: 14px;\r\n        width: 50px;\r\n    }\r\n</style>\r\n\r\n\r\n{% endblock %}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/website/templates/base.html b/website/templates/base.html
--- a/website/templates/base.html	(revision 70fb215d9d06d964e028b5c5d2cab54ef9294e71)
+++ b/website/templates/base.html	(date 1631464767907)
@@ -5,9 +5,9 @@
 <script type="text/javascript" src="{{url_for('static', filename='js/jscript.js')}}"></script>
 
 <!-- this script is for text editor from https://ckeditor.com/docs/ckeditor5/latest/builds/guides/quick-start.html -->
-<script src="https://cdn.ckeditor.com/ckeditor5/29.2.0/classic/ckeditor.js"></script>
+<script src="https://cdn.ckeditor.com/4.16.2/standard/ckeditor.js"></script>
 <script type="text/javascript"> CKEDITOR.replace('editor')</script>
-
+<script src="https://cdn.ckeditor.com/4.16.2/standard/ckeditor.js"></script>
 {% endblock %} {% block navbar %}
 <!-- <link rel="stylesheet" href="//cdn.rawgit.com/morteza/bootstrap-rtl/v3.3.4/dist/css/bootstrap-rtl.min.css"> -->
 <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-rtl/3.4.0/css/bootstrap-rtl.css" rel="stylesheet" type="text/css" /> -->
@@ -77,7 +77,6 @@
             <div class="main">
                 {% block main_content %}
 
-
                 <h1>
 
                     מערכת תומכת המסייעת בקבלת החלטות </h1>
Index: website/templates/dashboard.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% extends \"base.html\" %} {% import \"bootstrap/wtf.html\" as wtf %} {% block collapsing_navbar %}\r\n\r\n\r\n<ul class=\"nav navbar-nav navbar-right\">\r\n    <li><a href=\"{{ url_for('auth.logout') }}\">להתנתק</a></li>\r\n</ul>\r\n{% endblock %} {% block sidebar_content %}\r\n<ul>\r\n    <li><a href=\"{{ url_for('views.profile') }}\">פרופיל</a></li>\r\n    <li><a href=\"{{ url_for('views.builder') }}\">תבניות</a></li>\r\n    <li><a href=\"\">מחקר חדש</a></li>\r\n    <li><a href=\"#\">הגדרות</a></li>\r\n</ul>\r\n{% endblock %} {% block main_content %}\r\n<div class=\"\">\r\n    <div class=\"row placeholders\">\r\n        <div class=\"col-xs-6 placeholder right\">\r\n            <img src=\"data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\" width=\"200\"\r\n                 height=\"200\" class=\"img-responsive\" alt=\"research image\">\r\n            <h4>מחקרים</h4>\r\n            <span class=\"text-muted\">כמות המחקרים</span>\r\n        </div>\r\n\r\n        <div class=\"col-xs-6 placeholder\">\r\n            <img src=\"data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\" width=\"200\"\r\n                 height=\"200\" class=\"img-responsive\" alt=\"Generic placeholder thumbnail\">\r\n            <h4>הודעות</h4>\r\n            <span class=\"text-muted\">כמות ההודעות</span>\r\n        </div>\r\n    </div>\r\n\r\n    <h2 class=\"sub-header\">{{ table_name }}</h2>\r\n    <div class=\"table-responsive\">\r\n        <table class=\"table table-striped\">\r\n            <tr>\r\n            {% for h in table_headers %}\r\n                <th>{{ h }}</th>\r\n                {% endfor %}\r\n                <th></th>\r\n                </tr>\r\n            {% for user in table %}\r\n            <tr id=\"user_row\" data-toggle=\"modal\" data-target=\"#user_details_modal\">\r\n                <td class=\"first_name\">{{ user.first_name }}</td>\r\n                <td class=\"last_name\">{{ user.second_name }}</td>\r\n                <td class=\"email\">{{ user.email }}</td>\r\n                <td class=\"creation_date\">{{ user.creation_date }}</td>\r\n                <td class=\"permission\">{{ user.permission }}</td>\r\n                <td class=\"buttons\">\r\n                    <button type=\"button\" class=\"btn btn-info btn-sm\" data-toggle=\"modal\" data-target=\"#user_details_modal\">הצג</button>\r\n\r\n                    <button type=\"button\" class=\"btn btn-danger btn-sm\" data-toggle=\"\" data-target=\"\">מחק</button>\r\n                </td>\r\n            </tr>\r\n                {% endfor %}\r\n        </table>\r\n    </div>\r\n\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"user_details_modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\r\n         aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\" id=\"exampleModalLabel\">Modal title</h5>\r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div id=\"#user_modal_body\" class=\"modal-body\">\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">סגור</button>\r\n                    <button id=\"save_user_changes\" type=\"submit\" class=\"btn btn-primary\">אישור</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<style>\r\n    .sidenav ul {\r\n        list-style-type: none;\r\n    }\r\n</style>\r\n{% endblock %}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/website/templates/dashboard.html b/website/templates/dashboard.html
--- a/website/templates/dashboard.html	(revision 70fb215d9d06d964e028b5c5d2cab54ef9294e71)
+++ b/website/templates/dashboard.html	(date 1631453669183)
@@ -8,7 +8,7 @@
 <ul>
     <li><a href="{{ url_for('views.profile') }}">פרופיל</a></li>
     <li><a href="{{ url_for('views.builder') }}">תבניות</a></li>
-    <li><a href="">מחקר חדש</a></li>
+    <li><a href="{{ url_for('views.research') }}">מחקר חדש</a></li>
     <li><a href="#">הגדרות</a></li>
 </ul>
 {% endblock %} {% block main_content %}
Index: website/templates/includes/_formhelpers.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/website/templates/includes/_formhelpers.html b/website/templates/includes/_formhelpers.html
new file mode 100644
--- /dev/null	(date 1631454446614)
+++ b/website/templates/includes/_formhelpers.html	(date 1631454446614)
@@ -0,0 +1,9 @@
+{% macro render_field(field) %}
+    {{ field.label }}
+    {{ field(**kwargs)|safe }}
+    {% if field.errors %}
+        {% for error in field.errors %}
+            <span class="help-inline">{{ error }}</span>
+        {% endfor %}
+    {% endif %}
+{% endmacro %}
